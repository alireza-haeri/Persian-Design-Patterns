# ๐ค ุงูฺฏู Mediator (ูุงูุฌ / ูุงุณุท)

## ๐ฏ ูุฏู

ุงูฺฏู **Mediator** ฺฉ ุงูฺฏู ุทุฑุงุญ ุฑูุชุงุฑ (Behavioral) ุงุณุช ฺฉู **ูุงุจุณุชฺฏโูุง ูพฺุฏู ู ุขุดูุชู ุจู ุงุดุงุก ุฑุง ฺฉุงูุด ูโุฏูุฏ**. ุงู ุงูฺฏู ุงุฑุชุจุงุทุงุช ูุณุชูู ุจู ุงุดุงุก ุฑุง ูุญุฏูุฏ ฺฉุฑุฏู ู ุขูโูุง ุฑุง ูุฌุจูุฑ ูโฺฉูุฏ ฺฉู **ููุท ุงุฒ ุทุฑู ฺฉ ุดุก ูุงูุฌ** ุจุง ฺฉุฏฺฏุฑ ููฺฉุงุฑ ฺฉููุฏ.

ุจู ุฒุจุงู ุณุงุฏูโุชุฑุ Mediator ูุงููุฏ ฺฉ **ูุงูุฌ** ุง **ููุงููฺฏโฺฉููุฏู ูุฑฺฉุฒ** ุนูู ูโฺฉูุฏ ฺฉู ุชูุงู ุงุฑุชุจุงุทุงุช ุจู ุงุดุงุก ุฑุง ุงุฒ ุทุฑู ุฎูุฏ ูุฏุฑุช ูโฺฉูุฏุ ุจู ุฌุง ุงูฺฉู ุงุดุงุก ูุณุชููุงู ุจุง ูู ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ฺฉููุฏ.

## ๐ค ูุดฺฉู

ุฏุฑ ุจุฑูุงููโูุง ฺฉู ุงุฌุฒุง ูุชุนุฏุฏ ุจุง ูู ุชุนุงูู ุฏุงุฑูุฏุ ุงฺฏุฑ ูุฑ ุฌุฒุก ูุณุชููุงู ุจุง ุงุฌุฒุง ุฏฺฏุฑ ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ฺฉูุฏุ ูุดฺฉูุงุช ุฒุฑ ูพุด ูโุขุฏ:

### ูุซุงู ูุงูุน: ูุฑู ุซุจุชโูุงู

ุชุตูุฑ ฺฉูุฏ ฺฉ ูุฑู ุซุจุชโูุงู ุฏุงุฑุฏ ุจุง ุงู ุงููุงูโูุง:
- **TextBox** (ูุงู ฺฉุงุฑุจุฑุ ุฑูุฒ ุนุจูุฑุ ุงูู)
- **Checkbox** (ููุงูู ุฑุง ูโูพุฐุฑู)
- **Button** (ุซุจุชโูุงู)
- **Label** (ูพุงูโูุง ุฎุทุง/ููููุช)

ุงฺฏุฑ ุจุฏูู Mediator ุนูู ฺฉูุฏ:
- Button ุจุงุฏ ุจู TextBox ูุง ุฑุฌูุน ฺฉูุฏ ุชุง ููุงุฏุฑ ุฑุง ุจฺฏุฑุฏ
- Button ุจุงุฏ Checkbox ุฑุง ฺฺฉ ฺฉูุฏ
- Button ุจุงุฏ Label ุฑุง ุขูพุฏุช ฺฉูุฏ
- TextBox ุจุงุฏ Button ุฑุง ุบุฑูุนุงู/ูุนุงู ฺฉูุฏ
- Checkbox ุจุงุฏ Button ุฑุง ฺฉูุชุฑู ฺฉูุฏ

**ูุชุฌู**: ูุฑ ุงููุงู ุจู ุงููุงูโูุง ุฏฺฏุฑ ูุงุจุณุชู ุงุณุช = **Spaghetti Code** ๐

### ูุดฺฉูุงุช ุจุฏูู Mediator:

1. **Tight Coupling (ูุงุจุณุชฺฏ ุณุฎุช)**: ูุฑ ุดุก ุจู ฺูุฏู ุดุก ุฏฺฏุฑ ูุงุจุณุชู ุงุณุช
2. **ูพฺุฏฺฏ ุจุงูุง**: ุชุบุฑ ฺฉ ุดุก ูุงุฒ ุจู ุชุบุฑ ุดุกูุง ุฏฺฏุฑ ุฏุงุฑุฏ
3. **ุงุณุชูุงุฏู ูุฌุฏุฏ ุณุฎุช**: ููโุชูุงู ฺฉ ุฌุฒุก ุฑุง ุฌุฏุง ุงุฒ ุจูู ุงุณุชูุงุฏู ฺฉุฑุฏ
4. **ูฺฏูุฏุงุฑ ุฏุดูุงุฑ**: ุฑุฏุงุจ ู ุฑูุน ุจุงฺฏ ุณุฎุช ุงุณุช

## ๐ก ุฑุงูโุญู

ุงูฺฏู Mediator ุงู ูุดฺฉู ุฑุง ุจุง **ูุชูุฑฺฉุฒ ฺฉุฑุฏู ุชูุงู ุงุฑุชุจุงุทุงุช** ุฏุฑ ฺฉ ุดุก ูุงูุฌ ุญู ูโฺฉูุฏ:

- ุงุดุงุก ุฏฺฏุฑ ุฑุง ููโุดูุงุณูุฏุ ููุท ูุงูุฌ ุฑุง ูโุดูุงุณูุฏ
- ุชูุงู ุฏุฑุฎูุงุณุชโูุง ุงุฒ ุทุฑู ูุงูุฌ ุงุฑุณุงู ูโุดูุฏ
- ูุงูุฌ ุชุตูู ูโฺฏุฑุฏ ฺฉุฏุงู ุดุก ุจุงุฏ ูพุงุณุฎ ุฏูุฏ
- **Loose Coupling**: ุงุดุงุก ุจู ูู ูุงุจุณุชู ูุณุชูุฏ


## ๐ป ูพุงุฏูโุณุงุฒ ุจุง C#

### ูุซุงู: ุณุณุชู ฺุช ฺฏุฑูู

```csharp
using System;
using System.Collections.Generic;

// ุฑุงุจุท ูุงูุฌ - Mediator Interface
public interface IChatMediator
{
    void SendMessage(string message, User sender);
    void AddUser(User user);
}

// ูุงูุฌ ูุดุฎุต - Concrete Mediator
public class ChatRoom : IChatMediator
{
    private readonly List<User> _users = new();

    public void AddUser(User user)
    {
        _users.Add(user);
        Console.WriteLine($"โ {user.Name} ุจู ุงุชุงู ฺฏูุชฺฏู ูพูุณุช");
    }

    // ูุงูุฌ ุชูุงู ูพุงูโูุง ุฑุง ูุฏุฑุช ูโฺฉูุฏ
    public void SendMessage(string message, User sender)
    {
        foreach (var user in _users)
        {
            // ูพุงู ุฑุง ุจู ููู ุจู ุฌุฒ ูุฑุณุชูุฏู ุงุฑุณุงู ฺฉู
            if (user != sender)
            {
                user.Receive(message, sender.Name);
            }
        }
    }
}

// ฺฉุงููพูููุช - Colleague
public class User
{
    public string Name { get; }
    private readonly IChatMediator _mediator;

    public User(string name, IChatMediator mediator)
    {
        Name = name;
        _mediator = mediator;
    }

    // ุงุฑุณุงู ูพุงู ุงุฒ ุทุฑู ูุงูุฌ (ูู ูุณุชูู ุจู ฺฉุงุฑุจุฑุงู ุฏฺฏุฑ)
    public void Send(string message)
    {
        Console.WriteLine($"๐ฌ {Name} ูโฺฏูุฏ: {message}");
        _mediator.SendMessage(message, this);
    }

    // ุฏุฑุงูุช ูพุงู ุงุฒ ูุงูุฌ
    public void Receive(string message, string senderName)
    {
        Console.WriteLine($"   ๐จ {Name} ุฏุฑุงูุช ฺฉุฑุฏ: {message}");
    }
}

// ุงุณุชูุงุฏู
class Program
{
    static void Main()
    {
        // ุงุฌุงุฏ ูุงูุฌ (ุงุชุงู ฺุช)
        var chatRoom = new ChatRoom();

        // ุงุฌุงุฏ ฺฉุงุฑุจุฑุงู
        var ali = new User("ุนู", chatRoom);
        var reza = new User("ุฑุถุง", chatRoom);
        var sara = new User("ุณุงุฑุง", chatRoom);

        // ุงุถุงูู ฺฉุฑุฏู ฺฉุงุฑุจุฑุงู ุจู ุงุชุงู
        chatRoom.AddUser(ali);
        chatRoom.AddUser(reza);
        chatRoom.AddUser(sara);

        Console.WriteLine("\n๐ฌ ุดุฑูุน ูฺฉุงููู:\n");
        
        // ุงุฑุณุงู ูพุงูโูุง - ูุฑ ฺฉุงุฑุจุฑ ููุท ุจุง ูุงูุฌ ุตุญุจุช ูโฺฉูุฏ
        ali.Send("ุณูุงู ุจู ููู!");
        Console.WriteLine();
        
        reza.Send("ุณูุงู ุนู! ุญุงูุช ฺุทูุฑูุ");
        Console.WriteLine();
        
        sara.Send("ุฏุฑูุฏ ุจุฑ ููฺฏ! ฺู ุฎุจุฑุ");
    }
}
```

**ุฎุฑูุฌ:**
```
โ ุนู ุจู ุงุชุงู ฺฏูุชฺฏู ูพูุณุช
โ ุฑุถุง ุจู ุงุชุงู ฺฏูุชฺฏู ูพูุณุช
โ ุณุงุฑุง ุจู ุงุชุงู ฺฏูุชฺฏู ูพูุณุช

๐ฌ ุดุฑูุน ูฺฉุงููู:

๐ฌ ุนู ูโฺฏูุฏ: ุณูุงู ุจู ููู!
   ๐จ ุฑุถุง ุฏุฑุงูุช ฺฉุฑุฏ: ุณูุงู ุจู ููู!
   ๐จ ุณุงุฑุง ุฏุฑุงูุช ฺฉุฑุฏ: ุณูุงู ุจู ููู!

๐ฌ ุฑุถุง ูโฺฏูุฏ: ุณูุงู ุนู! ุญุงูุช ฺุทูุฑูุ
   ๐จ ุนู ุฏุฑุงูุช ฺฉุฑุฏ: ุณูุงู ุนู! ุญุงูุช ฺุทูุฑูุ
   ๐จ ุณุงุฑุง ุฏุฑุงูุช ฺฉุฑุฏ: ุณูุงู ุนู! ุญุงูุช ฺุทูุฑูุ

๐ฌ ุณุงุฑุง ูโฺฏูุฏ: ุฏุฑูุฏ ุจุฑ ููฺฏ! ฺู ุฎุจุฑุ
   ๐จ ุนู ุฏุฑุงูุช ฺฉุฑุฏ: ุฏุฑูุฏ ุจุฑ ููฺฏ! ฺู ุฎุจุฑุ
   ๐จ ุฑุถุง ุฏุฑุงูุช ฺฉุฑุฏ: ุฏุฑูุฏ ุจุฑ ููฺฏ! ฺู ุฎุจุฑุ
```

## ๐ฏ ูุซุงู ฺฉุงุฑุจุฑุฏ: ฺฉูุชุฑู ุชุฑุงูฺฉ ููุง

```csharp
// Mediator Interface
public interface IControlTower
{
    void RegisterAircraft(Aircraft aircraft);
    void RequestLanding(Aircraft aircraft);
    void RequestTakeoff(Aircraft aircraft);
}

// Concrete Mediator
public class ControlTower : IControlTower
{
    private readonly List<Aircraft> _aircrafts = new();
    private bool _runwayBusy = false;

    public void RegisterAircraft(Aircraft aircraft)
    {
        _aircrafts.Add(aircraft);
        Console.WriteLine($"โ๏ธ {aircraft.Name} ุซุจุช ุดุฏ");
    }

    public void RequestLanding(Aircraft aircraft)
    {
        if (!_runwayBusy)
        {
            _runwayBusy = true;
            Console.WriteLine($"โ {aircraft.Name}: ูุฌูุฒ ูุฑูุฏ ุฏุงุฑุฏ");
            _runwayBusy = false;
        }
        else
        {
            Console.WriteLine($"โธ๏ธ {aircraft.Name}: ููุชุธุฑ ุจูุงูุฏุ ุจุงูุฏ ุงุดุบุงู ุงุณุช");
        }
    }

    public void RequestTakeoff(Aircraft aircraft)
    {
        if (!_runwayBusy)
        {
            _runwayBusy = true;
            Console.WriteLine($"โ {aircraft.Name}: ูุฌูุฒ ูพุฑูุงุฒ ุฏุงุฑุฏ");
            _runwayBusy = false;
        }
        else
        {
            Console.WriteLine($"โธ๏ธ {aircraft.Name}: ููุชุธุฑ ุจูุงูุฏุ ุจุงูุฏ ุงุดุบุงู ุงุณุช");
        }
    }
}

// Colleague
public class Aircraft
{
    public string Name { get; }
    private readonly IControlTower _controlTower;

    public Aircraft(string name, IControlTower controlTower)
    {
        Name = name;
        _controlTower = controlTower;
    }

    public void RequestLanding() => _controlTower.RequestLanding(this);
    public void RequestTakeoff() => _controlTower.RequestTakeoff(this);
}

// ุงุณุชูุงุฏู
var tower = new ControlTower();

var flight1 = new Aircraft("ูพุฑูุงุฒ IR101", tower);
var flight2 = new Aircraft("ูพุฑูุงุฒ IR202", tower);

tower.RegisterAircraft(flight1);
tower.RegisterAircraft(flight2);

flight1.RequestLanding();
flight2.RequestTakeoff();
```

## โ๏ธ ูุฒุงุง ู ูุนุงุจ

### ูุฒุงุง โ

1. **ฺฉุงูุด ูุงุจุณุชฺฏ (Loose Coupling)**: ุงุฌุฒุง ุจู ูู ูุงุจุณุชู ูุณุชูุฏุ ููุท ุจู ูุงูุฌ
2. **ุงุตู ุชฺฉ ูุณุฆููุช**: ุงุฑุชุจุงุทุงุช ุฏุฑ ฺฉ ูฺฉุงู ูุชูุฑฺฉุฒ ูโุดูุฏ
3. **ุงุตู ุจุงุฒ/ุจุณุชู**: ูโุชูุงู ุงุฌุฒุง ุฌุฏุฏ ุจุฏูู ุชุบุฑ ุงุฌุฒุง ููุฌูุฏ ุงุถุงูู ฺฉุฑุฏ
4. **ุงุณุชูุงุฏู ูุฌุฏุฏ ุขุณุงูโุชุฑ**: ูุฑ ุฌุฒุก ูโุชูุงูุฏ ูุณุชูู ุงุณุชูุงุฏู ุดูุฏ
5. **ุณุงุฏฺฏ ุงุฑุชุจุงุทุงุช**: ููุทู ุงุฑุชุจุงุท ูพฺุฏู ุฏุฑ ูุงูุฌ ฺฉูพุณููู ูโุดูุฏ

### ูุนุงุจ โ

1. **God Object**: ูุงูุฌ ููฺฉู ุงุณุช ุฎู ูพฺุฏู ู ุจุฒุฑฺฏ ุดูุฏ
2. **ฺฉ ููุทู ุดฺฉุณุช (Single Point of Failure)**: ุงฺฏุฑ ูุงูุฌ ุฎุฑุงุจ ุดูุฏุ ููู ฺุฒ ุฎุฑุงุจ ูโุดูุฏ
3. **ูพฺุฏฺฏ ุงุถุงู**: ุจุฑุง ุณุณุชูโูุง ุณุงุฏูุ ููฺฉู ุงุณุช ุจุด ุงุฒ ุญุฏ ูพฺุฏู ุจุงุดุฏ

## ๐ ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉููุ

### โ ุงุณุชูุงุฏู ฺฉูุฏ ููุช:

1. **ุงุฑุชุจุงุทุงุช ูพฺุฏู**: ุงุฌุฒุง ุจู ุตูุฑุช ูพฺุฏู ู ุขุดูุชู ุจุง ูู ุงุฑุชุจุงุท ุฏุงุฑูุฏ
2. **ูุงุจุณุชฺฏโูุง ุฒุงุฏ**: ุชุบุฑ ฺฉ ฺฉูุงุณ ูุงุฒ ุจู ุชุบุฑ ฺฉูุงุณโูุง ุฒุงุฏ ุฏุงุฑุฏ
3. **ุงุณุชูุงุฏู ูุฌุฏุฏ ุณุฎุช**: ููโุชูุงูุฏ ฺฉ ุฌุฒุก ุฑุง ุจุฏูู ุงุฌุฒุง ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูุฏ
4. **ููุทู ุงุฑุชุจุงุท ูพุฑุงฺฉูุฏู**: logic ุงุฑุชุจุงุท ุฏุฑ ููู ุฌุง ูพุฑุงฺฉูุฏู ุงุณุช

### โ ุงุณุชูุงุฏู ูฺฉูุฏ ููุช:

1. **ุงุฑุชุจุงุทุงุช ุณุงุฏู**: ููุท ฺูุฏ ุฌุฒุก ุจุง ุงุฑุชุจุงุท ุณุงุฏู
2. **ุจุฏูู ูุงุฒ ุจู ูุชูุฑฺฉุฒุณุงุฒ**: ุงุฑุชุจุงุทุงุช ุงุฒ ูุจู ุณุงุฏู ู ูุงุถุญ ุงุณุช

## ๐ฏ ฺฉุงุฑุจุฑุฏูุง ูุงูุน

1. **ุณุณุชูโูุง ฺุช**: ูุฏุฑุช ูพุงูโุฑุณุงู ุจู ฺฉุงุฑุจุฑุงู
2. **ฺฉูุชุฑู ุชุฑุงูฺฉ ููุง**: ููุงููฺฏ ุจู ููุงูพูุงูุง
3. **ุฑุงุจุท ฺฉุงุฑุจุฑ (UI)**: ูุฏุฑุช ุชุนุงููุงุช ุจู ุงููุงูโูุง ูุฑู
4. **ุณุณุชูโูุง ุชูุฒุนโุดุฏู**: Message Broker (RabbitMQ, Kafka)
5. **ุจุงุฒโูุง**: ูุฏุฑุช ุชุนุงููุงุช ุจู ุดุฎุตุชโูุง ู ุงุดุงุก
6. **Smart Home**: ููุงููฺฏ ุจู ุฏุณุชฺฏุงูโูุง ููุดููุฏ

## ๐ ูฺฉุชู ฺฉูุฏ

> **ูุดุฏุงุฑ**: ูุฑุงูุจ ุจุงุดุฏ ูุงูุฌ ุฎู ุจุฒุฑฺฏ ูุดูุฏ! ุงฺฏุฑ ูุงูุฌ ุดูุง ุตุฏูุง ุฎุท ฺฉุฏ ุฏุงุฑุฏุ ุงุญุชูุงูุงู ุจุงุฏ ุขู ุฑุง ุจู ฺูุฏ ูุงูุฌ ฺฉูฺฺฉโุชุฑ ุชูุณู ฺฉูุฏ.
>
> **Best Practice**: ุงุฒ SOLID Principles ูพุฑู ฺฉูุฏ ู ูุงูุฌ ุฑุง modular ูฺฏู ุฏุงุฑุฏ.

## ๐ ูุซุงูโูุง ุฏูุง ูุงูุน

- **Airport Control Tower**: ุจุฑุฌ ฺฉูุชุฑู ูุฑูุฏฺฏุงู ูุงูุฌ ุจู ููุงูพูุงูุง
- **Chat Server**: ุณุฑูุฑ ฺุช ูุงูุฌ ุจู ฺฉุงุฑุจุฑุงู  
- **Message Broker**: RabbitMQ, Kafka ูุงูุฌ ุจู ุณุฑูุณโูุง
- **MVC Pattern**: Controller ูุงูุฌ ุจู Model ู View

---

> **ุงุฏุขูุฑ**: Mediator ุงุฑุชุจุงุทุงุช ุฑุง ูุชูุฑฺฉุฒ ูโฺฉูุฏ ู Spaghetti Code ุฑุง ุจู ฺฉุฏ ุชูุฒ ุชุจุฏู ูโฺฉูุฏ! ๐ค

**[๐ ุจุงุฒฺฏุดุช ุจู ุตูุญู ุงุตู](../index.html)**
